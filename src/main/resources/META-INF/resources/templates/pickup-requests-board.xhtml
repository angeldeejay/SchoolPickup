<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
  <h:body>
    <ui:composition>
      <h:form class="pending-pickup-requests-container" id="form">
        <h:panelGroup layout="block" id="board" class="p-grid p-ai-stretch pending-pickup-requests">
          <div class="p-col p-col-4">
            <div class="flex-container">
              <div class="flex-item">
                <p:panel header="Carril 1" class="level-panel"/>
              </div>
              <div class="flex-item">
                <c:if test="#{PickupRequestsPoll.slotOneSize > 0}">
                  <ui:repeat value="#{PickupRequestsPoll.slotOne}" var="pickupPending">
                    <p:panel class="pickup-card pickup-card-#{pickupPending.student.level.toLowerCase()}" header="Solicitud pendiente">
                      <h:panelGroup layout="block" class="p-m-0">
                        <div class="pickup-data-description">
                          <div style="padding-bottom: .25rem"><strong>En fila:</strong></div>
                          <div>
                            <address>
                              <strong><h:outputText value="#{pickupPending.parent.user.firstName} #{pickupPending.parent.user.lastName}"/></strong><br />
                              <i class="pi pi-id-card" />CC. <h:outputText value="#{pickupPending.parent.user.identification}"/><br />
                              <i class="pi pi-phone" /><h:outputText value="#{pickupPending.parent.phone}"/>
                            </address>
                          </div>
                          <div style="padding-bottom: .25rem"><strong>Esperando a:</strong></div>
                          <div>
                            <address style="padding-bottom: 0">
                              <strong><h:outputText value="#{pickupPending.student.firstName} #{pickupPending.student.lastName}"/></strong><br />
                              <i class="pi pi-sort-up" />CC. <h:outputText value="#{pickupPending.student.level}"/>
                            </address>
                          </div>
                        </div>
                      </h:panelGroup>
                    </p:panel>
                  </ui:repeat>
                </c:if>
              </div>
            </div>
          </div>
          <div class="p-col p-col-4">
            <div class="flex-container">
              <div class="flex-item">
                <p:panel header="Carril 2" class="level-panel"/>
              </div>
              <div class="flex-item">
                <c:if test="#{PickupRequestsPoll.slotTwoSize > 0}">
                  <ui:repeat value="#{PickupRequestsPoll.slotTwo}" var="pickupPending">
                    <p:panel class="pickup-card pickup-card-#{pickupPending.student.level.toLowerCase()}" header="Solicitud pendiente">
                      <h:panelGroup layout="block" class="p-m-0">
                        <div class="pickup-data-description">
                          <div style="padding-bottom: .25rem"><strong>En fila:</strong></div>
                          <div>
                            <address>
                              <strong><h:outputText value="#{pickupPending.parent.user.firstName} #{pickupPending.parent.user.lastName}"/></strong><br />
                              <i class="pi pi-id-card" />CC. <h:outputText value="#{pickupPending.parent.user.identification}"/><br />
                              <i class="pi pi-phone" /><h:outputText value="#{pickupPending.parent.phone}"/>
                            </address>
                          </div>
                          <div style="padding-bottom: .25rem"><strong>Esperando a:</strong></div>
                          <div>
                            <address style="padding-bottom: 0">
                              <strong><h:outputText value="#{pickupPending.student.firstName} #{pickupPending.student.lastName}"/></strong><br />
                              <i class="pi pi-sort-up" />CC. <h:outputText value="#{pickupPending.student.level}"/>
                            </address>
                          </div>
                        </div>
                      </h:panelGroup>
                    </p:panel>
                  </ui:repeat>
                </c:if>
              </div>
            </div>
          </div>
          <div class="p-col p-col-4">
            <div class="flex-container">
              <div class="flex-item">
                <p:panel header="Carril 3" class="level-panel"/>
              </div>
              <div class="flex-item">
                <c:if test="#{PickupRequestsPoll.slotThreeSize > 0}">
                  <ui:repeat value="#{PickupRequestsPoll.slotThree}" var="pickupPending">
                    <p:panel class="pickup-card pickup-card-#{pickupPending.student.level.toLowerCase()}" header="Solicitud pendiente">
                      <h:panelGroup layout="block" class="p-m-0">
                        <div class="pickup-data-description">
                          <div style="padding-bottom: .25rem"><strong>En fila:</strong></div>
                          <div>
                            <address>
                              <strong><h:outputText value="#{pickupPending.parent.user.firstName} #{pickupPending.parent.user.lastName}"/></strong><br />
                              <i class="pi pi-id-card" />CC. <h:outputText value="#{pickupPending.parent.user.identification}"/><br />
                              <i class="pi pi-phone" /><h:outputText value="#{pickupPending.parent.phone}"/>
                            </address>
                          </div>
                          <div style="padding-bottom: .25rem"><strong>Esperando a:</strong></div>
                          <div>
                            <address style="padding-bottom: 0">
                              <strong><h:outputText value="#{pickupPending.student.firstName} #{pickupPending.student.lastName}"/></strong><br />
                              <i class="pi pi-sort-up" />CC. <h:outputText value="#{pickupPending.student.level}"/>
                            </address>
                          </div>
                        </div>
                      </h:panelGroup>
                    </p:panel>
                  </ui:repeat>
                </c:if>
              </div>
            </div>
          </div>
        </h:panelGroup>
      </h:form>
      <p:poll interval="1" delay="500" ignoreComponentNotFound="true" autoStart="true" listener="#{PickupRequestsPoll.callService}" update="form"/>
    </ui:composition>
  </h:body>
</html>
